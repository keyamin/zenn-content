---
title: "dotfilesã‚’ç”¨ã„ãŸM1 MacBookã®ç’°å¢ƒæ§‹ç¯‰"
emoji: "ğŸ’»"
type: "tech"
topics: ["mac", "ç’°å¢ƒæ§‹ç¯‰", "m1"]
published: true
---

# æŠ•ç¨¿ã®çµŒç·¯

å…ˆæ—¥ã€2021 å¹´ç§‹ç™ºè¡¨ã® M1Max æ­è¼‰ MacBook Pro ã‚’è³¼å…¥ã—ã¾ã—ãŸ ğŸ˜Š
ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ä½•ã‚‚è€ƒãˆãšä¸€ç•ªä¸‹ã‚’é¸ã¶ã‚¿ã‚¤ãƒ—ã® Apple ä¿¡è€…ãªã®ã§ãƒ¢ãƒªãƒ¢ãƒªã‚¹ãƒšãƒƒã‚¯ã§è³¼å…¥ã—ã¾ã—ãŸ(SSD å®¹é‡ã¯æµçŸ³ã«è½ã¨ã—ãŸ)ãŒã€ã“ã®ã‚¹ãƒšãƒƒã‚¯ã‚’æ´»ã‹ã—ãã‚Œã‚‹æ°—ãŒã—ã¾ã›ã‚“ã€‚

ã§ã€ä»Šã¾ã§ç’°å¢ƒæ§‹ç¯‰ã¯å…¨éƒ¨æ‰‹å‹•ã§è¡Œã£ã¦ã„ãŸã®ã§ã™ãŒã€ã›ã£ã‹ããªã®ã§ã“ã‚Œã‚’æ©Ÿã«è‡ªå‹•åŒ–ã—ã¦ã¿ã‚ˆã†ï¼ã¨æ€ã„ dotfiles ã¨ã‚„ã‚‰ã‚’ä½œã£ã¦ã¿ã¾ã—ãŸã€‚(ãã—ã¦ã“ã‚ŒãŒåˆã®å€‹äººãƒªãƒã‚¸ãƒˆãƒªã§ã™...)
https://github.com/keyamin/dotfiles
ãã®å‚™å¿˜éŒ²çš„ãªè¨˜äº‹ã§ã™ã€‚ã‚¢ãƒ‰ãƒã‚¤ã‚¹ãƒ»ã”æŒ‡æ‘˜ç­‰ã‚ã‚Šã¾ã—ãŸã‚‰æ˜¯éã‚³ãƒ¡ãƒ³ãƒˆé ‚ããŸã„ã§ã™ï¼

## Rosetta2 ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ä¸–ã«ã‚ã‚‹ Intel ç‰ˆ Mac ç”¨ dotfiles ãŸã¡ã¨æ¯”è¼ƒã—ãŸã¨ãã®é•ã„ã¯ Rosetta2 ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®ã¿ã§ã™ã€‚

```sh:homebrew/init.sh
sudo softwareupdate --install-rosetta
```

2022 å¹´ 1 æœˆåˆæ—¬æ™‚ç‚¹ã§ Google æ—¥æœ¬èªå…¥åŠ›ã€Teamsã€ãƒ­ã‚¸ã‚¯ãƒ¼ãƒ« Options ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«å¿…è¦ã ã£ãŸãŸã‚ã€brew bundle å‰ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã¾ã™ã€‚

Docker ã«é–¢ã—ã¦ã€å°‘ã—å‰ã¾ã§ã¯ brew cask ã§ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã ã¨ Intel ç‰ˆãŒå…¥ã£ã¦ã—ã¾ã†ã‚ˆã†ã§ã—ãŸãŒã€è¨˜äº‹åŸ·ç­†æ™‚ç‚¹ã§ã¯ AppleSilicon ç‰ˆã® docker ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã—ãŸã€‚

## defaults ã‚³ãƒãƒ³ãƒ‰ã‚’ç”¨ã„ãŸã‚·ã‚¹ãƒ†ãƒ ç’°å¢ƒè¨­å®š

Mac ã®ã‚·ã‚¹ãƒ†ãƒ ç’°å¢ƒè¨­å®š(ãƒˆãƒ©ãƒƒã‚¯ãƒ‘ãƒƒãƒ‰ã‚’ã‚¿ãƒƒãƒ—ã§ã‚‚åå¿œã•ã›ãŸã‚Šã¨ã‹ã€ãƒã‚¦ã‚¹ã®æ„Ÿåº¦ä¸Šã’ãŸã‚Šã¨ã‹ã™ã‚‹ã‚„ã¤)ã«é–¢ã—ã¦ã‚‚è‡ªå‹•åŒ–ã—ãŸã‹ã£ãŸã®ã§ã€defaults ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã£ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ãã¾ã—ãŸã€‚å…¨ä½“çš„ã«å…ˆäººãŸã¡ã®è¨­å®šã‚’~~ãƒ‘ã‚¯ã£ãŸ~~å‚è€ƒã«ã•ã›ã¦ã„ãŸã ã„ãŸã ã‘ã§ã™ãŒã€M1ãƒ»Monterey ç’°å¢ƒã§ã®å‹•ä½œã¯ç¢ºèªæ¸ˆã¿ã§ã™ã€‚

```sh:macos/setup.sh
if [ $(uname) != "Darwin" ] ; then
	echo "Not MacOS!"
	exit 0
fi

# Dock
## Dockã‹ã‚‰ã™ã¹ã¦ã®ã‚¢ãƒ—ãƒªã‚’æ¶ˆã™
defaults write com.apple.dock persistent-apps -array
## Dockã®ã‚µã‚¤ã‚º
defaults write com.apple.dock "tilesize" -int "36"
## æœ€è¿‘èµ·å‹•ã—ãŸã‚¢ãƒ—ãƒªã‚’éè¡¨ç¤º
defaults write com.apple.dock "show-recents" -bool "false"
## ã‚¢ãƒ—ãƒªã‚’ã—ã¾ã†ã¨ãã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
defaults write com.apple.dock "mineffect" -string "scale"
## ä½¿ç”¨çŠ¶æ³ã«åŸºã¥ã„ã¦ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã®é †ç•ªã‚’å…¥ã‚Œæ›¿ãˆ
defaults write com.apple.dock "mru-spaces" -bool "false"

# Screenshot
## ç”»åƒã®å½±ã‚’ç„¡åŠ¹åŒ–
defaults write com.apple.screencapture "disable-shadow" -bool "true"
## ä¿å­˜å ´æ‰€
if [[ ! -d "$HOME/Pictures/Screenshots" ]]; then
    mkdir -p "$HOME/Pictures/Screenshots"
fi
defaults write com.apple.screencapture "location" -string "~/Pictures/Screenshots"
## æ’®å½±æ™‚ã®ã‚µãƒ ãƒã‚¤ãƒ«è¡¨ç¤º
defaults write com.apple.screencapture "show-thumbnail" -bool "false"
## ä¿å­˜å½¢å¼
defaults write com.apple.screencapture "type" -string "jpg"

# Finder
## æ‹¡å¼µå­ã¾ã§è¡¨ç¤º
defaults write NSGlobalDomain "AppleShowAllExtensions" -bool "true"
## éš ã—ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¡¨ç¤º
defaults write com.apple.Finder "AppleShowAllFiles" -bool "true"
## ãƒ‘ã‚¹ãƒãƒ¼ã‚’è¡¨ç¤º
defaults write com.apple.finder ShowPathbar -bool "true"
## æœªç¢ºèªãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¨ãã®è­¦å‘Šç„¡åŠ¹åŒ–
defaults write com.apple.LaunchServices LSQuarantine -bool "false"
## ã‚´ãƒŸç®±ã‚’ç©ºã«ã™ã‚‹ã¨ãã®è­¦å‘Šç„¡åŠ¹åŒ–
defaults write com.apple.finder WarnOnEmptyTrash -bool "false"

# Feedback
## ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’é€ä¿¡ã—ãªã„
defaults write com.apple.appleseed.FeedbackAssistant "Autogather" -bool "false"
## ã‚¯ãƒ©ãƒƒã‚·ãƒ¥ãƒ¬ãƒãƒ¼ãƒˆç„¡åŠ¹åŒ–
defaults write com.apple.CrashReporter DialogType -string "none"

# .DS_Store
defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool "true"
defaults write com.apple.desktopservices DSDontWriteUSBStores -bool "true"

# Battery
## ãƒãƒƒãƒ†ãƒªãƒ¼ã‚’%è¡¨ç¤º
defaults write com.apple.menuextra.battery ShowPercent -string "YES"

# Trackpad
## ã‚¿ãƒƒãƒ—ã§ã‚¯ãƒªãƒƒã‚¯
defaults write com.apple.AppleMultitouchTrackpad Clicking -bool "true"
defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad Clicking -bool "true"
defaults -currentHost write -g com.apple.mouse.tapBehavior -bool "true"
## è»Œè·¡ã®é€Ÿã•
defaults write -g com.apple.trackpad.scaling 3
## ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®æ–¹å‘
defaults write -g com.apple.swipescrolldirection -bool "false"

# Mouse
## è»Œè·¡ã®é€Ÿã•
defaults write -g com.apple.mouse.scaling 3
## ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®é€Ÿã•
defaults write -g com.apple.scrollwheel.scaling 5

# Keyboard
## ã‚­ãƒ¼ã®ãƒªãƒ”ãƒ¼ãƒˆé€Ÿåº¦
defaults write NSGlobalDomain KeyRepeat -int 2
## ã‚­ãƒ¼ã®ãƒªãƒ”ãƒ¼ãƒˆèªè­˜æ™‚é–“
defaults write NSGlobalDomain InitialKeyRepeat -int 15
## ãƒ•ãƒ«ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚¢ã‚¯ã‚»ã‚¹ã‚’æœ‰åŠ¹åŒ–
defaults write NSGlobalDomain AppleKeyboardUIMode -int 3
## æœ¬ä½“ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã®CapsLockã‚­ãƒ¼ã®å‹•ä½œã‚’Controlã«ãƒªãƒãƒƒãƒ—
keyboard_id="$(ioreg -c AppleEmbeddedKeyboard -r | grep -Eiw "VendorID|ProductID" | awk '{ print $4 }' | paste -s -d'-\n' -)-0"
defaults -currentHost write -g com.apple.keyboard.modifiermapping.${keyboard_id} -array-add "
<dict>
  <key>HIDKeyboardModifierMappingDst</key>\
  <integer>30064771300</integer>\
  <key>HIDKeyboardModifierMappingSrc</key>\
  <integer>30064771129</integer>\
</dict>
"

# Security
## ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«on
sudo defaults write /Library/Preferences/com.Apple.alf globalstate -int 1

# Others
## Googleã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯DNSã‚’ä½¿ç”¨ã™ã‚‹
networksetup -setdnsservers Wi-Fi 2001:4860:4860::8844 2001:4860:4860::8888 8.8.4.4 8.8.8.8
## è‡ªå‹•ã§é ­æ–‡å­—ã‚’å¤§æ–‡å­—ã«ã—ãªã„
defaults write NSGlobalDomain NSAutomaticCapitalizationEnabled -bool "false"
## ã‚¹ãƒšãƒ«ã®è¨‚æ­£ã‚’ç„¡åŠ¹ã«ã™ã‚‹
defaults write NSGlobalDomain NSAutomaticSpellingCorrectionEnabled -bool "false"
```

## ãã®ä»–

ãã®ä»–ã€VSCode ã®æ‹¡å¼µæ©Ÿèƒ½ã‚„ã€asdf ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã ã£ãŸã‚Šã‚’è¡Œã£ã¦ã„ã¾ã™ãŒã€ãã¡ã‚‰ã¯å‰²æ„›ã€‚

ã¨ã‚Šã‚ãˆãšã¯ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’æ•´ç†ã—ãŸã‚Šã€OS ã‚„ãƒ—ãƒ­ã‚»ãƒƒã‚µã§ã®åˆ†å²ã‚’ã™ã‚‹ã‚ˆã†å®Ÿè£…ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™...

## æœ€å¾Œã«

ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã¯ã˜ã‚ã¦ 1 å¹´ã¨æ•°ãƒ¶æœˆãŒãŸã¡ã€ãã‚ãã‚ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã‚‚å§‹ã‚ã¦ã„ã“ã†ã¨æ€ã„è¨˜äº‹ã‚’æ›¸ã„ã¦ã¿ã¾ã—ãŸãŒã€æ™®æ®µè‡ªåˆ†ãŒãŠä¸–è©±ã«ãªã£ã¦ã„ã‚‹ã‚ˆã†ãªã‚ã‹ã‚Šã‚„ã™ã„è¨˜äº‹ã‚’æ›¸ãã®ã£ã¦é›£ã—ã„ã§ã™ã­...

å‚™å¿˜éŒ²çš„ãªè¨˜äº‹ãŒå¤šããªã‚‹ã‹ã¨æ€ã„ã¾ã™ãŒã€ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚„æŠ€è¡“çš„ãªã”æŒ‡æ‘˜ç­‰ã„ãŸã ã‘ã‚‹ã¨å¬‰ã—ã„ã§ã™ã€ã“ã‚Œã‹ã‚‰ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™ï¼
